<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="style.css" >
  <script type="text/javascript" src="https://unpkg.com/vue@next"></script>
  
</head>
<body>
  <header>
      <h1>ONLINE SHOP SITE--THE FIRST GROUP</h1>
  </header>
  
  <button onclick="openModal()">查看購物車</button>


  <div id="main"> <!-- main 一定要放vue 前面!!!!!!!!!!!!!!!!!-->
    <div id="list" v-if="UI=='main'"><!-- main 一定要放vue 前面!!!!!!!!!!!!!!!!!-->
        <table border=1><!-- main 一定要放vue 前面!!!!!!!!!!!!!!!!!-->
            <tr>
              <td>序號</td>
              <td>商品名稱</td>
              <td>價格</td>
              <td>內容說明</td>
              <td>存貨數量</td>
            </tr>
            <tr v-for="product in dat">
              <td>{{product.id}}</td>
              <td>{{product.name}}</td>
              <td>{{product.price}}</td>
              <td>{{product.detail}}</td>
              <td>{{product.remain}}</td>
              <td>
                <button @click="addToCart(product),updateCart()">加入購物車</button>
              </td>
            </tr>
          </table>
      </div>


      
  </div>



  <script>
    const productApp = Vue.createApp({
      data() {
        return {
          UI: 'main',
          dat: [],
          newProduct: {
            id: -1,
            name: '',
            price: '',
            detail: '',
            remain: ''
          }
        }
      },
      methods: {
        loadList: function () {
          const that = this;
          fetch('controller.php?act=listProduct')
            .then(function (response) {
              return response.json();
            })
            .then(function (myJson) {
              that.dat = myJson;
            });
        }
        },
      created() {
        this.loadList();
        this.openModal();      //(((((((((((需要在加
      }
    }).mount("#main");

  </script>
</body> 
</html>